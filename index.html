<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞: –ü–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä —ñ –ø–æ—Ö–∏–ª–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .quiz-container { max-width: 600px; width: 100%; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .question { background: #f8f9fa; padding: 15px; border-radius: 12px; margin-bottom: 15px; border-left: 5px solid #0088cc; }
        input[type="number"] { width: 100%; padding: 12px; margin-top: 10px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
        
        /* –ö–Ω–æ–ø–∫–∞ –∑–¥–∞—á—ñ (–¥–∏–∑–∞–π–Ω –∑ —Ç–≤–æ–≥–æ –∫–æ–º—ñ—Ç—É) */
        .submit-btn { width: 100%; padding: 15px; background: #0088cc; color: white; border: none; border-radius: 12px; font-size: 18px; cursor: pointer; transition: 0.3s; margin-top: 10px; font-weight: bold; }
        .submit-btn:hover { background: #006699; }
        
        /* –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä (–≤–∏—Å–æ—Ç–∞ 50px —è–∫ —É –∫–æ–º—ñ—Ç—ñ) */
        .calc-wrapper { background: #1a1a1a; padding: 15px; border-radius: 15px; margin-bottom: 25px; color: white; width: 100%; box-sizing: border-box; }
        .calc-display { width: 100%; height: 50px; background: #333; border-radius: 5px; border: 1px solid #444; margin-bottom: 10px; text-align: right; padding: 5px 15px; font-size: 1.5rem; color: #00ff08; box-sizing: border-box; font-family: monospace; }
        .calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
        .calc-btn { padding: 15px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px; background: #4a4a4a; color: white; }
        .calc-btn.op { background: #f39c12; }
        .calc-btn.spec { background: #2980b9; }
        .calc-btn.clear { background: #c0392b; }

        /* –ï–∫—Ä–∞–Ω –ø—Ä–æ–≤–∞–ª—É */
        #fail-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #ff4444; color: white; flex-direction: column; align-items: center; justify-content: center; z-index: 9999; text-align: center; padding: 20px; }
    </style>
</head>
<body>

<div id="fail-screen">
    <h1 style="font-size: 3rem;">Test failed.</h1>
    <p id="fail-reason" style="font-size: 1.5rem;"></p>
    <p>–°–ø—Ä–æ–±–∞ –∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω–∞. –í—á–∏—Ç–µ–ª—å –æ—Ç—Ä–∏–º–∞–≤ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è.</p>
</div>

<div class="quiz-container" id="quiz-ui">
    <h2 style="text-align: center;">üìê –¢–µ—Å—Ç: 6 –∑–∞–≤–¥–∞–Ω—å</h2>

    <div class="calc-wrapper">
        <input type="text" id="calc-display" class="calc-display" placeholder="0" readonly>
        <div class="calc-grid">
            <button class="calc-btn clear" onclick="cClear()">C</button>
            <button class="calc-btn spec" onclick="cSquare()">x¬≤</button>
            <button class="calc-btn spec" onclick="cSqrt()">‚àö</button>
            <button class="calc-btn spec" onclick="cSin()">sin¬∞</button>
            
            <button class="calc-btn" onclick="cAdd('7')">7</button>
            <button class="calc-btn" onclick="cAdd('8')">8</button>
            <button class="calc-btn" onclick="cAdd('9')">9</button>
            <button class="calc-btn op" onclick="cAdd('/')">/</button>
            
            <button class="calc-btn" onclick="cAdd('4')">4</button>
            <button class="calc-btn" onclick="cAdd('5')">5</button>
            <button class="calc-btn" onclick="cAdd('6')">6</button>
            <button class="calc-btn op" onclick="cAdd('*')">*</button>
            
            <button class="calc-btn" onclick="cAdd('1')">1</button>
            <button class="calc-btn" onclick="cAdd('2')">2</button>
            <button class="calc-btn" onclick="cAdd('3')">3</button>
            <button class="calc-btn op" onclick="cAdd('-')">-</button>
            
            <button class="calc-btn" onclick="cAdd('0')">0</button>
            <button class="calc-btn" onclick="cAdd('.')">.</button>
            <button class="calc-btn op" onclick="cSolve()">=</button>
            <button class="calc-btn op" onclick="cAdd('+')">+</button>
        </div>
    </div>

    <div class="question"><p>1. –ü–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä 12 —Å–º, –ø–æ—Ö–∏–ª–∞ 13 —Å–º. –ó–Ω–∞–π–¥—ñ—Ç—å –ø—Ä–æ—î–∫—Ü—ñ—é.</p><input type="number" id="q1"></div>
    <div class="question"><p>2. –ü–æ—Ö–∏–ª–∞ 20 —Å–º, –∫—É—Ç 30¬∞. –ó–Ω–∞–π–¥—ñ—Ç—å –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä.</p><input type="number" id="q2"></div>
    <div class="question"><p>3. –ü—Ä–æ—î–∫—Ü—ñ—è 8 —Å–º, –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä 15 —Å–º. –ó–Ω–∞–π–¥—ñ—Ç—å –ø–æ—Ö–∏–ª—É.</p><input type="number" id="q3"></div>
    <div class="question"><p>4. –ü–æ—Ö–∏–ª—ñ 10 —ñ 17 —Å–º. –û–¥–Ω–∞ –ø—Ä–æ—î–∫—Ü—ñ—è –Ω–∞ 9 —Å–º –±—ñ–ª—å—à–∞. –ó–Ω–∞–π–¥—ñ—Ç—å –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä.</p><input type="number" id="q4"></div>
    <div class="question"><p>5. –ü–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä 4 —Å–º, –∫—É—Ç 45¬∞. –ü–æ—Ö–∏–ª–∞? (sqrt(32) ‚âà 6).</p><input type="number" id="q5"></div>
    <div class="question"><p>6. –í—ñ–¥—Å—Ç–∞–Ω—å 6 —Å–º, –ø–æ—Ö–∏–ª–∞ 10 —Å–º. –ó–Ω–∞–π–¥—ñ—Ç—å –ø—Ä–æ—î–∫—Ü—ñ—é.</p><input type="number" id="q6"></div>

    <button class="submit-btn" onclick="finishTest()">–ó–¥–∞—Ç–∏ —Ä–æ–±–æ—Ç—É</button>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // –ó–ê–•–ò–°–¢
    function blockTest(reason) {
        document.getElementById('quiz-ui').style.display = 'none';
        document.getElementById('fail-screen').style.display = 'flex';
        document.getElementById('fail-reason').innerText = reason;
        tg.sendData(JSON.stringify({"status": "blocked", "reason": reason}));
        setTimeout(() => { tg.close(); }, 3000);
    }

    // –¢–≤–æ—ó —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó: –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –Ω–∞ —ñ–Ω—à—É –≤–∫–ª–∞–¥–∫—É –∞–±–æ –∑–≥–æ—Ä—Ç–∞–Ω–Ω—ñ
    window.onblur = () => blockTest("–í–∏—Ö—ñ–¥ –∑ –≤—ñ–∫–Ω–∞");
    document.addEventListener("visibilitychange", () => { 
        if (document.hidden) blockTest("–ó–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤—ñ–∫–Ω–∞"); 
    });

    // –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† (–±–µ–∑ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å –ª–æ–≥—ñ–∫–∏)
    const d = document.getElementById('calc-display');
    function cAdd(v) { d.value += v; }
    function cClear() { d.value = ''; }
    function cSolve() { try { d.value = eval(d.value); } catch { d.value = 'Error'; } }
    function cSqrt() { if(d.value) d.value = Math.sqrt(eval(d.value)).toFixed(2); }
    function cSquare() { if(d.value) d.value = Math.pow(eval(d.value), 2); }
    function cSin() { if(d.value) d.value = Math.sin(eval(d.value) * Math.PI / 180).toFixed(4); }

    function finishTest() {
        let score = 0;
        if (document.getElementById('q1').value == "5") score += 2;
        if (document.getElementById('q2').value == "10") score += 2;
        if (document.getElementById('q3').value == "17") score += 2;
        if (document.getElementById('q4').value == "8") score += 2;
        if (document.getElementById('q5').value == "6") score += 2;
        if (document.getElementById('q6').value == "8") score += 2;

        tg.sendData(JSON.stringify({"status": "completed", "score": score}));
        tg.close();
    }
</script>
</body>
</html>

